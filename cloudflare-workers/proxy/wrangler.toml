name = "willena-proxy"
main = "src/index.js"
compatibility_date = "2025-12-08"

# Service bindings to route requests to other CF Workers
# These allow calling other workers without going through the network
[[services]]
binding = "SUPABASE_AUTH"
service = "supabase-auth"

[[services]]
binding = "HOMEWORK_API"
service = "homework-api"

[[services]]
binding = "LOG_WORD_ATTEMPT"
service = "log-word-attempt"

[[services]]
binding = "PROGRESS_SUMMARY"
service = "progress-summary"

[[services]]
binding = "GET_AUDIO_URLS"
service = "get-audio-urls"

# Custom domain route - api.willenaenglish.com -> this proxy worker
routes = [
  { pattern = "api.willenaenglish.com/*", zone_name = "willenaenglish.com" }
]

# Fallback for non-CF functions
[vars]
NETLIFY_BASE = "https://willenaenglish.netlify.app"
