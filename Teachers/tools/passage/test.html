<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passage Pagination Test</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div style="padding: 20px; font-family: 'Poppins', sans-serif;">
        <h1>Passage Pagination Test</h1>
        <button onclick="testPagination()" style="padding: 10px 20px; background: #007cba; color: white; border: none; border-radius: 5px; cursor: pointer;">Test Pagination</button>
        <div id="testResult" style="margin-top: 20px;"></div>
    </div>

    <script src="passage.js"></script>
    <script>
        function testPagination() {
            const testContent = `Maya was nine years old when she found the old key in her grandmother's attic. It was a peculiar thing – made of a metal she couldn't identify, with intricate designs carved into its surface. The key seemed to shimmer in the dusty afternoon light that filtered through the small attic window.

"What does it open?" Maya asked, her eyes wide with curiosity.

"That, my child, is something you must discover for yourself. But I will tell you this – the key will only work when you truly need it to."

Maya spent the rest of the day thinking about the key and what it might unlock. She carried it with her everywhere, feeling its smooth surface in her pocket. That evening, as she sat by her bedroom window looking out at the forest, she made a decision.

The next morning, Maya told her grandmother that she wanted to explore the forest to see if the key might open something there. Nani nodded approvingly. "I was wondering when you would ask," she said. "Take this with you." She handed Maya a small compass. "It will help you find your way back home."

As Maya entered the forest, she was amazed by its beauty. Tall trees stretched up toward the sky, their leaves creating a natural canopy that filtered the sunlight into dancing patterns on the forest floor. Birds sang melodious songs, and butterflies fluttered from flower to flower.

After walking for what felt like hours, Maya came to a small clearing where an ancient oak tree stood. At the base of the tree, partially hidden by moss and fallen leaves, was a small wooden door. Maya's heart raced as she pulled the key from her pocket.

The key fit perfectly into the lock. With a soft click, the door opened to reveal a spiral staircase leading down into the earth. Maya hesitated for only a moment before descending into the mysterious underground chamber.`;

            try {
                const pages = createMultiPagePassage("The Magical Key", testContent, "'Poppins', sans-serif", "16px");
                
                document.getElementById('testResult').innerHTML = `
                    <h2>Test Results</h2>
                    <p><strong>Generated ${pages.length} pages</strong></p>
                    <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0; max-height: 400px; overflow-y: auto;">
                        ${pages.join('<hr style="margin: 20px 0; border: 2px solid #007cba;">')}
                    </div>
                `;
            } catch (error) {
                document.getElementById('testResult').innerHTML = `
                    <h2>Test Error</h2>
                    <p style="color: red;">Error: ${error.message}</p>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">${error.stack}</pre>
                `;
            }
        }
    </script>
</body>
</html>